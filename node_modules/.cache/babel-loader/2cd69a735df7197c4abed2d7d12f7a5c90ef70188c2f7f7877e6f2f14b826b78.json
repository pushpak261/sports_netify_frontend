{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{useCart}from\"../context/CartContext\";import ApiService from\"../../service/ApiService\";import\"../../style/productDetailsPage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetailsPage=()=>{const{productId}=useParams();const{cart,dispatch}=useCart();const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProduct=async()=>{setLoading(true);try{const response=await ApiService.getProductById(productId);const productData=response.product;// Ensure image URL is correctly formatted\nif(productData&&productData.imageUrl&&!productData.imageUrl.startsWith(\"http\")){productData.imageUrl=`http://localhost:2424/uploads/${productData.imageUrl}`;}setProduct(productData);}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Product not found.\");}finally{setLoading(false);}};fetchProduct();},[productId]);const addToCart=()=>{if(product){dispatch({type:\"ADD_ITEM\",payload:product});}};const incrementItem=()=>{if(product){dispatch({type:\"INCREMENT_ITEM\",payload:product});}};const decrementItem=()=>{if(product){const cartItem=cart.find(item=>item.id===product.id);if(cartItem&&cartItem.quantity>1){dispatch({type:\"DECREMENT_ITEM\",payload:product});}else{dispatch({type:\"REMOVE_ITEM\",payload:product});}}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading product details...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error});const cartItem=cart.find(item=>item.id===product.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-detail\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl||\"https://via.placeholder.com/200\"// Default image if not available\n,alt:product.name,className:\"product-image\",onError:e=>e.target.src=\"https://via.placeholder.com/200\"}),/*#__PURE__*/_jsx(\"h1\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",product.price.toFixed(2)]}),cartItem?/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decrementItem,children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:cartItem.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:incrementItem,children:\"+\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add To Cart\"})]});};export default ProductDetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useCart","ApiService","jsx","_jsx","jsxs","_jsxs","ProductDetailsPage","productId","cart","dispatch","product","setProduct","loading","setLoading","error","setError","fetchProduct","response","getProductById","productData","imageUrl","startsWith","_error$response","_error$response$data","data","message","addToCart","type","payload","incrementItem","decrementItem","cartItem","find","item","id","quantity","children","className","src","alt","name","onError","e","target","description","price","toFixed","onClick"],"sources":["C:/Users/pushp/OneDrive/Desktop/client/src/component/pages/ProductDetailsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport ApiService from \"../../service/ApiService\";\nimport \"../../style/productDetailsPage.css\";\n\nconst ProductDetailsPage = () => {\n    const { productId } = useParams();\n    const { cart, dispatch } = useCart();\n    const [product, setProduct] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchProduct = async () => {\n            setLoading(true);\n            try {\n                const response = await ApiService.getProductById(productId);\n                const productData = response.product;\n\n                // Ensure image URL is correctly formatted\n                if (productData && productData.imageUrl && !productData.imageUrl.startsWith(\"http\")) {\n                    productData.imageUrl = `http://localhost:2424/uploads/${productData.imageUrl}`;\n                }\n\n                setProduct(productData);\n            } catch (error) {\n                setError(error.response?.data?.message || \"Product not found.\");\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchProduct();\n    }, [productId]);\n\n    const addToCart = () => {\n        if (product) {\n            dispatch({ type: \"ADD_ITEM\", payload: product });\n        }\n    };\n\n    const incrementItem = () => {\n        if (product) {\n            dispatch({ type: \"INCREMENT_ITEM\", payload: product });\n        }\n    };\n\n    const decrementItem = () => {\n        if (product) {\n            const cartItem = cart.find((item) => item.id === product.id);\n            if (cartItem && cartItem.quantity > 1) {\n                dispatch({ type: \"DECREMENT_ITEM\", payload: product });\n            } else {\n                dispatch({ type: \"REMOVE_ITEM\", payload: product });\n            }\n        }\n    };\n\n    if (loading) return <p>Loading product details...</p>;\n    if (error) return <p className=\"error-message\">{error}</p>;\n\n    const cartItem = cart.find((item) => item.id === product.id);\n\n    return (\n        <div className=\"product-detail\">\n            <img\n                src={product.imageUrl || \"https://via.placeholder.com/200\"} // Default image if not available\n                alt={product.name}\n                className=\"product-image\"\n                onError={(e) => (e.target.src = \"https://via.placeholder.com/200\")}\n            />\n            <h1>{product.name}</h1>\n            <p>{product.description}</p>\n            <span>${product.price.toFixed(2)}</span>\n            {cartItem ? (\n                <div className=\"quantity-controls\">\n                    <button onClick={decrementItem}>-</button>\n                    <span>{cartItem.quantity}</span>\n                    <button onClick={incrementItem}>+</button>\n                </div>\n            ) : (\n                <button onClick={addToCart}>Add To Cart</button>\n            )}\n        </div>\n    );\n};\n\nexport default ProductDetailsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}